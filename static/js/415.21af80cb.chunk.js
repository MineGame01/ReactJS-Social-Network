"use strict";(self.webpackChunkreactjs_social_network=self.webpackChunkreactjs_social_network||[]).push([[415],{9415:(e,t,s)=>{s.r(t),s.d(t,{default:()=>L});var a=s(5043),r=s(3003),o=s(8164),l=s(5541);const n={getUsers:(e,t)=>l.s.get("/users?page=".concat(e,"&term=").concat(t)).then((e=>e.data))},u={setFollower:e=>l.s.post("/follow/".concat(e)).then((e=>e.data)),deleteFollower:e=>l.s.delete("/follow/".concat(e)).then((e=>e.data))},c=(0,o.Uj)({boolean:!0}),i=(0,o.Uj)({boolean:!1}),g="User_user__8boIy",d="User_body__vWnOo",h="User_logo__Te+lp",m="User_info__kOKIl",p="User_name__Yb9Ds",b="User_subtitle__5rOUX";var N=s(5475),x=s(579);const _=e=>{let{id:t,followedOnUser:s,...a}=e;const r=()=>{const e=a.followed?"delete":"set";a.toggleFollowerStatus(t,e)};return(0,x.jsx)("div",{className:g,id:t,children:(0,x.jsxs)("div",{className:d,children:[(0,x.jsxs)("div",{className:h,children:[(0,x.jsx)(N.k2,{to:"/profile/"+t,children:(0,x.jsx)("img",{src:a.img||"https://www.shutterstock.com/image-vector/default-avatar-profile-icon-social-600nw-1677509740.jpg",alt:a.img||"https://www.shutterstock.com/image-vector/default-avatar-profile-icon-social-600nw-1677509740.jpg"})}),a.followed?(0,x.jsx)("button",{className:"buttonDefault",onClick:r,disabled:a.isFollowing.some((e=>e===t)),children:"Unsubscribe"}):(0,x.jsx)("button",{className:"buttonDefault",onClick:r,disabled:a.isFollowing.some((e=>e===t)),children:"Subscribe"})]}),(0,x.jsxs)("div",{className:m,children:[(0,x.jsx)("div",{className:p,children:a.name}),(0,x.jsx)("div",{className:b,children:a.status})]})]})})},w=e=>{let{users:t,isFollowing:s,...a}=e;return(0,x.jsx)("div",{children:t.map((e=>(0,x.jsx)(_,{id:e.id,img:e.photos.small,followed:e.followed,name:e.name,status:e.status,isFollowing:s,users:t,toggleFollowerStatus:a.toggleFollowerStatus})))})};var j=s(7591);const P="SearchInput_body__EWuGr",v=e=>{const{PageNumber:t,updatePageNumber:s,SearchText:a,updateSearchText:r}=e;return(0,x.jsxs)("div",{className:P,children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("span",{children:"Pages: "}),(0,x.jsx)("input",{className:"textareaDefault",type:"number",value:t,onChange:s})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("span",{children:"Search to the name: "}),(0,x.jsx)("input",{className:"textareaDefault",type:"text",value:a,onChange:r})]})]})},f="PageNumberLent_PageNumber__P5kzZ",k="PageNumberLent_PageNumber__body__ephkh",S="PageNumberLent_pageButton__BHapu",C="PageNumberLent_active__vBhjC",T=e=>{const{PageNumber:t,postPageNumber:s,PageNumberURL:r,NumberPage:o}=e,l=Math.ceil(o/10);let[n,u]=(0,a.useState)(1);const c=10*(n-1)+1,i=10*n;return(0,x.jsx)("div",{className:f,children:(0,x.jsxs)("div",{className:k,children:[n>1&&(0,x.jsx)("button",{className:"buttonDefault",onClick:()=>u(n-1),children:"PREV"}),t.filter((e=>e>=c&&e<=i)).map((e=>(0,x.jsx)("span",{onClick:()=>{var t;(t=e)!==r&&s(t)},className:"buttonDefault \n                                    ".concat(S," \n                                    ").concat(e===r&&C,"    "),children:e},e))),l>n&&(0,x.jsx)("button",{className:"buttonDefault",onClick:()=>u(n+1),children:"NEXT"})]})})};var U=s(22),F=s(3923),D=s(8208);class y extends a.Component{constructor(){super(...arguments),this.updatePageNumber=e=>{const{getPageNumber:t,getUserThunkCreator:s,SearchText:a}=this.props;t({number:e.target.value}),s(e.target.value,a)},this.updateSearchText=e=>{const{getSearchText:t,getUserThunkCreator:s,PageNumber:a}=this.props;t({text:e.target.value}),s(a,e.target.value)},this.postPageNumber=e=>{const{getPageNumber:t,getUserThunkCreator:s,SearchText:a}=this.props;t({number:e}),s(e,a)}}componentDidMount(){const{getUserThunkCreator:e,PageNumber:t,SearchText:s}=this.props,a=this.props.router.params.pageNumber;e(a||t,s)}render(){let e=Math.ceil(this.props.totalCount/this.props.countPage),t=[];for(let s=1;s<=e;s++)t.push(s);return(0,x.jsxs)("div",{children:[(0,x.jsx)(T,{NumberPage:e,PageNumber:t,PageNumberURL:this.props.PageNumber,postPageNumber:this.postPageNumber}),(0,x.jsx)(v,{PageNumber:this.props.PageNumber,updatePageNumber:this.updatePageNumber,SearchText:this.props.SearchText,updateSearchText:this.updateSearchText}),this.props.isLoades?(0,x.jsx)(j.A,{}):(0,x.jsx)(w,{users:this.props.users,isFollowing:this.props.isFollowing,toggleFollowerStatus:this.props.toggleFollowerStatus})]})}}const L=(0,F.Zz)((0,r.Ng)((e=>({users:(0,U._1)(e),PageNumber:(0,U.ax)(e),countPage:(0,U.Qu)(e),totalCount:(0,U.zm)(e),SearchText:(0,U.x0)(e),isLoades:(0,U.Qs)(e),isFollowing:(0,U.Dm)(e)})),{getUserThunkCreator:(e,t)=>async s=>{s(c);const a=await n.getUsers(e,t);a&&(s((0,o.bQ)({data:a.items})),s((0,o.og)({count:a.totalCount})),s(i))},toggleFollowerStatus:(e,t)=>async s=>{let a,r;if("set"===t)a=u.setFollower.bind(u),r=o.po;else{if("delete"!==t)return;a=u.deleteFollower.bind(u),r=o.OI}s((0,o.NH)({userID:e,boolean:!0}));try{0===(await a(e)).resultCode?(s(r({id:e})),s((0,o.NH)({userID:e,boolean:!1}))):console.error("Failed to toggle follower status")}catch(l){console.error("An error occurred: ",l)}},getPageNumber:o.rH,getSearchText:o.Kk}),D.K)(y)}}]);
//# sourceMappingURL=415.21af80cb.chunk.js.map