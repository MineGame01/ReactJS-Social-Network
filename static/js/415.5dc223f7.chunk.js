"use strict";(self.webpackChunkreactjs_social_network=self.webpackChunkreactjs_social_network||[]).push([[415],{9415:(e,t,a)=>{a.r(t),a.d(t,{default:()=>L});var s=a(5043),l=a(3003),o=a(8164),r=a(5541);const n={getUsers:(e,t)=>r.s.get("/users?page=".concat(e,"&term=").concat(t)).then((e=>e.data))},c={setFollower:e=>r.s.post("/follow/".concat(e)).then((e=>e.data)),deleteFollower:e=>r.s.delete("/follow/".concat(e)).then((e=>e.data))};var u=a(3438);const i=(0,o.Uj)({boolean:!0}),g=(0,o.Uj)({boolean:!1}),d="User_user__8boIy",m="User_body__vWnOo",b="User_logo__Te+lp",h="User_info__kOKIl",N="User_name__Yb9Ds",x="User_subtitle__5rOUX";var p=a(5475),_=a(579);const w=e=>{let{id:t,followedOnUser:a,...s}=e;const l=()=>{const e=s.followed?"delete":"set";s.toggleFollowerStatus(t,e)};return(0,_.jsx)("div",{className:d,id:t,children:(0,_.jsxs)("div",{className:m,children:[(0,_.jsxs)("div",{className:b,children:[(0,_.jsx)(p.k2,{to:"/profile/"+t,children:(0,_.jsx)("img",{src:s.img||"https://www.shutterstock.com/image-vector/default-avatar-profile-icon-social-600nw-1677509740.jpg",alt:s.img||"https://www.shutterstock.com/image-vector/default-avatar-profile-icon-social-600nw-1677509740.jpg"})}),s.followed?(0,_.jsx)("button",{className:"buttonDefault",onClick:l,disabled:s.isFollowing.some((e=>e===t)),children:"Unsubscribe"}):(0,_.jsx)("button",{className:"buttonDefault",onClick:l,disabled:s.isFollowing.some((e=>e===t)),children:"Subscribe"})]}),(0,_.jsxs)("div",{className:h,children:[(0,_.jsx)("div",{className:N,children:s.name}),(0,_.jsx)("div",{className:x,children:s.status})]})]})})},j=e=>{let{users:t,isFollowing:a,...s}=e;return(0,_.jsx)("div",{children:t.map((e=>(0,_.jsx)(w,{id:e.id,img:e.photos.small,followed:e.followed,name:e.name,status:e.status,isFollowing:a,users:t,toggleFollowerStatus:s.toggleFollowerStatus},e.id)))})};var v=a(7623);const f="SearchInput_body__EWuGr",P=e=>{const{PageNumber:t,updatePageNumber:a,SearchText:s,updateSearchText:l}=e;return(0,_.jsxs)("div",{className:f,children:[(0,_.jsxs)("div",{children:[(0,_.jsx)("span",{children:"Pages: "}),(0,_.jsx)("input",{className:"textareaDefault",type:"number",value:t,onChange:a,min:1})]}),(0,_.jsxs)("div",{children:[(0,_.jsx)("span",{children:"Search to the name: "}),(0,_.jsx)("input",{className:"textareaDefault",type:"text",value:s,onChange:l})]})]})},k="PageNumberLent_PageNumber__P5kzZ",S="PageNumberLent_PageNumber__body__ephkh",F="PageNumberLent_pageButton__BHapu",U="PageNumberLent_active__vBhjC",C=e=>{const{PageNumber:t,postPageNumber:a,PageNumberURL:l,NumberPage:o}=e,r=Math.ceil(o/10);let[n,c]=(0,s.useState)(1);const u=10*(n-1)+1,i=10*n;return(0,_.jsx)("div",{className:k,children:(0,_.jsxs)("div",{className:S,children:[n>1&&(0,_.jsx)("button",{className:"buttonDefault",onClick:()=>c(n-1),children:"PREV"}),t.filter((e=>e>=u&&e<=i)).map((e=>(0,_.jsx)("span",{onClick:()=>{var t;(t=e)!==l&&a(t)},className:"buttonDefault \n                                    ".concat(F," \n                                    ").concat(e===l&&U,"    "),children:e},e))),r>n&&(0,_.jsx)("button",{className:"buttonDefault",onClick:()=>c(n+1),children:"NEXT"})]})})};var T=a(22),D=a(3923),y=a(3216);const L=(0,D.Zz)((0,l.Ng)((e=>({users:(0,T._1)(e),pageNumber:(0,T.ax)(e),countPage:(0,T.Qu)(e),totalCount:(0,T.zm)(e),SearchText:(0,T.x0)(e),isLoades:(0,T.Qs)(e),isFollowing:(0,T.Dm)(e)})),{getUserThunkCreator:(e,t)=>async a=>{a(i);try{const s=await n.getUsers(e,t);s&&(a((0,o.bQ)({data:s.items})),a((0,o.og)({count:s.totalCount}))),a(g)}catch(s){a((0,u.Gp)({error:s})),a(g),a((0,o.HO)())}},toggleFollowerStatus:(e,t)=>async a=>{let s,l;if("set"===t)s=c.setFollower.bind(c),l=o.po;else{if("delete"!==t)return;s=c.deleteFollower.bind(c),l=o.OI}a((0,o.NH)({userID:e,boolean:!0}));try{0===(await s(e)).resultCode&&(a(l({id:e})),a((0,o.NH)({userID:e,boolean:!1})))}catch(r){a((0,u.Gp)({error:r}))}},getPageNumber:o.rH,getSearchText:o.Kk}))((e=>{const{getUserThunkCreator:t,pageNumber:a,SearchText:l,getPageNumber:o,getSearchText:r,totalCount:n,countPage:c,isLoades:u,users:i,isFollowing:g,toggleFollowerStatus:d}=e,m=(0,y.g)();(0,s.useEffect)((()=>{const e=m.pageNumber;o({number:e||1}),t(e||a,l)}),[m.pageNumber]);let b=Math.ceil(n/c),h=[];for(let s=1;s<=b;s++)h.push(s);return(0,_.jsxs)("div",{children:[(0,_.jsx)(C,{NumberPage:b,PageNumber:h,PageNumberURL:a,postPageNumber:e=>{o({number:e}),t(e,l)}}),(0,_.jsx)(P,{PageNumber:a,updatePageNumber:e=>{o({number:e.target.value||1}),t(e.target.value||1,l)},SearchText:l,updateSearchText:e=>{r({text:e.target.value}),t(a,e.target.value)}}),u?(0,_.jsx)(v.A,{}):(0,_.jsx)(j,{users:i,isFollowing:g,toggleFollowerStatus:d})]})}))}}]);
//# sourceMappingURL=415.5dc223f7.chunk.js.map