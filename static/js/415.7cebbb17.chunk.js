"use strict";(self.webpackChunkreactjs_social_network=self.webpackChunkreactjs_social_network||[]).push([[415],{9415:(e,t,s)=>{s.r(t),s.d(t,{default:()=>A});var a=s(5043),r=s(3003),o=s(8164),l=s(7154);const n=l.A.create({baseURL:"https://social-network.samuraijs.com/api/1.0/users",withCredentials:!0,headers:{"API-KEY":"1f84f6e8-b356-4dde-b9c0-fd88b14d48cd"}}),u={getUsers:(e,t)=>n.get("?page=".concat(e,"&term=").concat(t)).then((e=>e.data))},i=l.A.create({baseURL:"https://social-network.samuraijs.com/api/1.0/follow/",withCredentials:!0,headers:{"API-KEY":"1f84f6e8-b356-4dde-b9c0-fd88b14d48cd"}}),c={setFollower:e=>i.post("".concat(e)).then((e=>e.data)),deleteFollower:e=>i.delete("".concat(e)).then((e=>e.data))},d=(0,o.Uj)({boolean:!0}),h=(0,o.Uj)({boolean:!1}),g="User_user__8boIy",m="User_body__vWnOo",p="User_logo__Te+lp",b="User_info__kOKIl",N="User_name__Yb9Ds",x="User_subtitle__5rOUX";var _=s(5475),w=s(579);const j=e=>{let{id:t,followedOnUser:s,...a}=e;const r=()=>{const e=a.followed?"delete":"set";a.toggleFollowerStatus(t,e)};return(0,w.jsx)("div",{className:g,id:t,children:(0,w.jsxs)("div",{className:m,children:[(0,w.jsxs)("div",{className:p,children:[(0,w.jsx)(_.k2,{to:"/profile/"+t,children:(0,w.jsx)("img",{src:null!==a.img?a.img:"https://www.shutterstock.com/image-vector/default-avatar-profile-icon-social-600nw-1677509740.jpg",alt:a.img})}),a.followed?(0,w.jsx)("button",{className:"buttonDefault",onClick:r,disabled:a.isFollowing.some((e=>e===t)),children:"\u041e\u0442\u043f\u0438\u0441\u0430\u0442\u0438\u0441\u044f"}):(0,w.jsx)("button",{className:"buttonDefault",onClick:r,disabled:a.isFollowing.some((e=>e===t)),children:"\u041f\u0456\u0434\u043f\u0438\u0441\u0430\u0442\u0438\u0441\u044f"})]}),(0,w.jsxs)("div",{className:b,children:[(0,w.jsx)("div",{className:N,children:a.name}),(0,w.jsx)("div",{className:x,children:a.status})]})]})})},P=e=>{let{users:t,isFollowing:s,...a}=e;return(0,w.jsx)("div",{children:t.map((e=>(0,w.jsx)(j,{id:e.id,img:e.photos.small,followed:e.followed,name:e.name,status:e.status,isFollowing:s,users:t,toggleFollowerStatus:a.toggleFollowerStatus})))})};var f=s(7591);const v="SearchInput_body__EWuGr",k=e=>{const{PageNumber:t,updatePageNumber:s,SearchText:a,updateSearchText:r}=e;return(0,w.jsxs)("div",{className:v,children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("span",{children:"\u0421\u0442\u043e\u0440\u0456\u043d\u043a\u0438: "}),(0,w.jsx)("input",{className:"textareaDefault",type:"number",value:t,onChange:s})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("span",{children:"\u041d\u0430\u0439\u0442\u0438 \u043f\u043e \u0456\u043c\u044f: "}),(0,w.jsx)("input",{className:"textareaDefault",type:"text",value:a,onChange:r})]})]})},C="PageNumberLent_PageNumber__P5kzZ",S="PageNumberLent_PageNumber__body__ephkh",U="PageNumberLent_pageButton__BHapu",T="PageNumberLent_active__vBhjC",F=e=>{const{PageNumber:t,postPageNumber:s,PageNumberURL:r,NumberPage:o}=e,l=Math.ceil(o/10);let[n,u]=(0,a.useState)(1);const i=10*(n-1)+1,c=10*n;return(0,w.jsx)("div",{className:C,children:(0,w.jsxs)("div",{className:S,children:[n>1&&(0,w.jsx)("button",{className:"buttonDefault",onClick:()=>u(n-1),children:"PREV"}),t.filter((e=>e>=i&&e<=c)).map((e=>(0,w.jsx)("span",{onClick:()=>{var t;(t=e)!==r&&s(t)},className:"buttonDefault \n                                    ".concat(U," \n                                    ").concat(e===r&&T,"    "),children:e},e))),l>n&&(0,w.jsx)("button",{className:"buttonDefault",onClick:()=>u(n+1),children:"NEXT"})]})})};var D=s(22),L=s(3923),y=s(8208);class I extends a.Component{constructor(){super(...arguments),this.updatePageNumber=e=>{const{getPageNumber:t,getUserThunkCreator:s,SearchText:a}=this.props;t({number:e.target.value}),s(e.target.value,a)},this.updateSearchText=e=>{const{getSearchText:t,getUserThunkCreator:s,PageNumber:a}=this.props;t({text:e.target.value}),s(a,e.target.value)},this.postPageNumber=e=>{const{getPageNumber:t,getUserThunkCreator:s,SearchText:a}=this.props;t({number:e}),s(e,a)},this.Loaders=e=>this.props.isLoades?(0,w.jsx)(f.A,{}):e}componentDidMount(){const{getUserThunkCreator:e,PageNumber:t,SearchText:s}=this.props,a=this.props.router.params.pageNumber;e(a||t,s)}render(){let e=Math.ceil(this.props.totalCount/this.props.countPage),t=[];for(let s=1;s<=e;s++)t.push(s);return(0,w.jsxs)("div",{children:[(0,w.jsx)(F,{NumberPage:e,PageNumber:t,PageNumberURL:this.props.PageNumber,postPageNumber:this.postPageNumber}),(0,w.jsx)(k,{PageNumber:this.props.PageNumber,updatePageNumber:this.updatePageNumber,SearchText:this.props.SearchText,updateSearchText:this.updateSearchText}),this.Loaders((0,w.jsx)(P,{users:this.props.users,isFollowing:this.props.isFollowing,toggleFollowerStatus:this.props.toggleFollowerStatus}))]})}}const A=(0,L.Zz)((0,r.Ng)((e=>({users:(0,D._1)(e),PageNumber:(0,D.ax)(e),countPage:(0,D.Qu)(e),totalCount:(0,D.zm)(e),SearchText:(0,D.x0)(e),isLoades:(0,D.Qs)(e),isFollowing:(0,D.Dm)(e)})),{getUserThunkCreator:(e,t)=>async s=>{s(d);const a=await u.getUsers(e,t);a&&(s((0,o.bQ)({data:a.items})),s((0,o.og)({count:a.totalCount})),s(h))},toggleFollowerStatus:(e,t)=>async s=>{let a,r;if("set"===t)a=c.setFollower.bind(c),r=o.po;else{if("delete"!==t)return;a=c.deleteFollower.bind(c),r=o.OI}s((0,o.NH)({userID:e,boolean:!0}));try{0===(await a(e)).resultCode?(s(r({id:e})),s((0,o.NH)({userID:e,boolean:!1}))):console.error("Failed to toggle follower status")}catch(l){console.error("An error occurred: ",l)}},getPageNumber:o.rH,getSearchText:o.Kk}),y.K)(I)}}]);
//# sourceMappingURL=415.7cebbb17.chunk.js.map