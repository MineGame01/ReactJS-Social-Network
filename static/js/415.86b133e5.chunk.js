"use strict";(self.webpackChunkreactjs_social_network=self.webpackChunkreactjs_social_network||[]).push([[415],{9415:(e,t,s)=>{s.r(t),s.d(t,{default:()=>A});var a=s(5043),r=s(3003),o=s(8164),l=s(7154);const n=l.A.create({baseURL:"https://social-network.samuraijs.com/api/1.0/users",withCredentials:!0,headers:{"API-KEY":"1f84f6e8-b356-4dde-b9c0-fd88b14d48cd"}}),c={getUsers:(e,t)=>n.get("?page=".concat(e,"&term=").concat(t)).then((e=>e.data))},u=l.A.create({baseURL:"https://social-network.samuraijs.com/api/1.0/follow/",withCredentials:!0,headers:{"API-KEY":"1f84f6e8-b356-4dde-b9c0-fd88b14d48cd"}}),i={setFollower:e=>u.post("".concat(e)).then((e=>e.data)),deleteFollower:e=>u.delete("".concat(e)).then((e=>e.data))},d=(0,o.Uj)({boolean:!0}),h=(0,o.Uj)({boolean:!1}),g="User_user__8boIy",m="User_body__vWnOo",p="User_logo__Te+lp",b="User_info__kOKIl",N="User_name__Yb9Ds",x="User_subtitle__5rOUX";var w=s(5475),_=s(579);const j=e=>{let{id:t,followedOnUser:s,...a}=e;const r=()=>{const e=a.followed?"delete":"set";a.toggleFollowerStatus(t,e)};return(0,_.jsx)("div",{className:g,id:t,children:(0,_.jsxs)("div",{className:m,children:[(0,_.jsxs)("div",{className:p,children:[(0,_.jsx)(w.k2,{to:"/profile/"+t,children:(0,_.jsx)("img",{src:a.img||"https://www.shutterstock.com/image-vector/default-avatar-profile-icon-social-600nw-1677509740.jpg",alt:a.img||"https://www.shutterstock.com/image-vector/default-avatar-profile-icon-social-600nw-1677509740.jpg"})}),a.followed?(0,_.jsx)("button",{className:"buttonDefault",onClick:r,disabled:a.isFollowing.some((e=>e===t)),children:"Unsubscribe"}):(0,_.jsx)("button",{className:"buttonDefault",onClick:r,disabled:a.isFollowing.some((e=>e===t)),children:"Subscribe"})]}),(0,_.jsxs)("div",{className:b,children:[(0,_.jsx)("div",{className:N,children:a.name}),(0,_.jsx)("div",{className:x,children:a.status})]})]})})},P=e=>{let{users:t,isFollowing:s,...a}=e;return(0,_.jsx)("div",{children:t.map((e=>(0,_.jsx)(j,{id:e.id,img:e.photos.small,followed:e.followed,name:e.name,status:e.status,isFollowing:s,users:t,toggleFollowerStatus:a.toggleFollowerStatus})))})};var f=s(7591);const v="SearchInput_body__EWuGr",k=e=>{const{PageNumber:t,updatePageNumber:s,SearchText:a,updateSearchText:r}=e;return(0,_.jsxs)("div",{className:v,children:[(0,_.jsxs)("div",{children:[(0,_.jsx)("span",{children:"Pages: "}),(0,_.jsx)("input",{className:"textareaDefault",type:"number",value:t,onChange:s})]}),(0,_.jsxs)("div",{children:[(0,_.jsx)("span",{children:"Search to the name: "}),(0,_.jsx)("input",{className:"textareaDefault",type:"text",value:a,onChange:r})]})]})},S="PageNumberLent_PageNumber__P5kzZ",C="PageNumberLent_PageNumber__body__ephkh",U="PageNumberLent_pageButton__BHapu",T="PageNumberLent_active__vBhjC",F=e=>{const{PageNumber:t,postPageNumber:s,PageNumberURL:r,NumberPage:o}=e,l=Math.ceil(o/10);let[n,c]=(0,a.useState)(1);const u=10*(n-1)+1,i=10*n;return(0,_.jsx)("div",{className:S,children:(0,_.jsxs)("div",{className:C,children:[n>1&&(0,_.jsx)("button",{className:"buttonDefault",onClick:()=>c(n-1),children:"PREV"}),t.filter((e=>e>=u&&e<=i)).map((e=>(0,_.jsx)("span",{onClick:()=>{var t;(t=e)!==r&&s(t)},className:"buttonDefault \n                                    ".concat(U," \n                                    ").concat(e===r&&T,"    "),children:e},e))),l>n&&(0,_.jsx)("button",{className:"buttonDefault",onClick:()=>c(n+1),children:"NEXT"})]})})};var D=s(22),L=s(3923),y=s(8208);class I extends a.Component{constructor(){super(...arguments),this.updatePageNumber=e=>{const{getPageNumber:t,getUserThunkCreator:s,SearchText:a}=this.props;t({number:e.target.value}),s(e.target.value,a)},this.updateSearchText=e=>{const{getSearchText:t,getUserThunkCreator:s,PageNumber:a}=this.props;t({text:e.target.value}),s(a,e.target.value)},this.postPageNumber=e=>{const{getPageNumber:t,getUserThunkCreator:s,SearchText:a}=this.props;t({number:e}),s(e,a)}}componentDidMount(){const{getUserThunkCreator:e,PageNumber:t,SearchText:s}=this.props,a=this.props.router.params.pageNumber;e(a||t,s)}render(){let e=Math.ceil(this.props.totalCount/this.props.countPage),t=[];for(let s=1;s<=e;s++)t.push(s);return(0,_.jsxs)("div",{children:[(0,_.jsx)(F,{NumberPage:e,PageNumber:t,PageNumberURL:this.props.PageNumber,postPageNumber:this.postPageNumber}),(0,_.jsx)(k,{PageNumber:this.props.PageNumber,updatePageNumber:this.updatePageNumber,SearchText:this.props.SearchText,updateSearchText:this.updateSearchText}),this.props.isLoades?(0,_.jsx)(f.A,{}):(0,_.jsx)(P,{users:this.props.users,isFollowing:this.props.isFollowing,toggleFollowerStatus:this.props.toggleFollowerStatus})]})}}const A=(0,L.Zz)((0,r.Ng)((e=>({users:(0,D._1)(e),PageNumber:(0,D.ax)(e),countPage:(0,D.Qu)(e),totalCount:(0,D.zm)(e),SearchText:(0,D.x0)(e),isLoades:(0,D.Qs)(e),isFollowing:(0,D.Dm)(e)})),{getUserThunkCreator:(e,t)=>async s=>{s(d);const a=await c.getUsers(e,t);a&&(s((0,o.bQ)({data:a.items})),s((0,o.og)({count:a.totalCount})),s(h))},toggleFollowerStatus:(e,t)=>async s=>{let a,r;if("set"===t)a=i.setFollower.bind(i),r=o.po;else{if("delete"!==t)return;a=i.deleteFollower.bind(i),r=o.OI}s((0,o.NH)({userID:e,boolean:!0}));try{0===(await a(e)).resultCode?(s(r({id:e})),s((0,o.NH)({userID:e,boolean:!1}))):console.error("Failed to toggle follower status")}catch(l){console.error("An error occurred: ",l)}},getPageNumber:o.rH,getSearchText:o.Kk}),y.K)(I)}}]);
//# sourceMappingURL=415.86b133e5.chunk.js.map