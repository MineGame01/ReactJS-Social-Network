"use strict";(self.webpackChunkreactjs_social_network=self.webpackChunkreactjs_social_network||[]).push([[415],{9415:(e,t,s)=>{s.r(t),s.d(t,{default:()=>L});var a=s(5043),l=s(3003),o=s(8164),r=s(5541);const n={getUsers:(e,t)=>r.s.get("/users?page=".concat(e,"&term=").concat(t)).then((e=>e.data))},c={setFollower:e=>r.s.post("/follow/".concat(e)).then((e=>e.data)),deleteFollower:e=>r.s.delete("/follow/".concat(e)).then((e=>e.data))};var u=s(3438);const i=(0,o.Uj)({boolean:!0}),g=(0,o.Uj)({boolean:!1}),d="User_user__8boIy",m="User_body__vWnOo",b="User_logo__Te+lp",h="User_info__kOKIl",x="User_name__Yb9Ds",N="User_subtitle__5rOUX";var p=s(5475),_=s(579);const w=e=>{let{id:t,followedOnUser:s,...a}=e;const l=()=>{const e=a.followed?"delete":"set";a.toggleFollowerStatus(t,e)};return(0,_.jsx)("div",{className:d,id:t,children:(0,_.jsxs)("div",{className:m,children:[(0,_.jsxs)("div",{className:b,children:[(0,_.jsx)(p.k2,{to:"/profile/"+t,children:(0,_.jsx)("img",{src:a.img||"https://www.shutterstock.com/image-vector/default-avatar-profile-icon-social-600nw-1677509740.jpg",alt:a.img||"https://www.shutterstock.com/image-vector/default-avatar-profile-icon-social-600nw-1677509740.jpg"})}),a.followed?(0,_.jsx)("button",{className:"buttonDefault",onClick:l,disabled:a.isFollowing.some((e=>e===t)),children:"Unsubscribe"}):(0,_.jsx)("button",{className:"buttonDefault",onClick:l,disabled:a.isFollowing.some((e=>e===t)),children:"Subscribe"})]}),(0,_.jsxs)("div",{className:h,children:[(0,_.jsx)("div",{className:x,children:a.name}),(0,_.jsx)("div",{className:N,children:a.status})]})]})})},j=e=>{let{users:t,isFollowing:s,...a}=e;return(0,_.jsx)("div",{children:t.map((e=>(0,_.jsx)(w,{id:e.id,img:e.photos.small,followed:e.followed,name:e.name,status:e.status,isFollowing:s,users:t,toggleFollowerStatus:a.toggleFollowerStatus})))})};var v=s(7623);const f="SearchInput_body__EWuGr",P=e=>{const{PageNumber:t,updatePageNumber:s,SearchText:a,updateSearchText:l}=e;return(0,_.jsxs)("div",{className:f,children:[(0,_.jsxs)("div",{children:[(0,_.jsx)("span",{children:"Pages: "}),(0,_.jsx)("input",{className:"textareaDefault",type:"number",value:t,onChange:s})]}),(0,_.jsxs)("div",{children:[(0,_.jsx)("span",{children:"Search to the name: "}),(0,_.jsx)("input",{className:"textareaDefault",type:"text",value:a,onChange:l})]})]})},k="PageNumberLent_PageNumber__P5kzZ",S="PageNumberLent_PageNumber__body__ephkh",F="PageNumberLent_pageButton__BHapu",U="PageNumberLent_active__vBhjC",C=e=>{const{PageNumber:t,postPageNumber:s,PageNumberURL:l,NumberPage:o}=e,r=Math.ceil(o/10);let[n,c]=(0,a.useState)(1);const u=10*(n-1)+1,i=10*n;return(0,_.jsx)("div",{className:k,children:(0,_.jsxs)("div",{className:S,children:[n>1&&(0,_.jsx)("button",{className:"buttonDefault",onClick:()=>c(n-1),children:"PREV"}),t.filter((e=>e>=u&&e<=i)).map((e=>(0,_.jsx)("span",{onClick:()=>{var t;(t=e)!==l&&s(t)},className:"buttonDefault \n                                    ".concat(F," \n                                    ").concat(e===l&&U,"    "),children:e},e))),r>n&&(0,_.jsx)("button",{className:"buttonDefault",onClick:()=>c(n+1),children:"NEXT"})]})})};var T=s(22),D=s(3923),y=s(3216);const L=(0,D.Zz)((0,l.Ng)((e=>({users:(0,T._1)(e),pageNumber:(0,T.ax)(e),countPage:(0,T.Qu)(e),totalCount:(0,T.zm)(e),SearchText:(0,T.x0)(e),isLoades:(0,T.Qs)(e),isFollowing:(0,T.Dm)(e)})),{getUserThunkCreator:(e,t)=>async s=>{s(i);try{const a=await n.getUsers(e,t);a&&(s((0,o.bQ)({data:a.items})),s((0,o.og)({count:a.totalCount}))),s(g)}catch(a){s((0,u.Gp)({error:a})),s(g)}},toggleFollowerStatus:(e,t)=>async s=>{let a,l;if("set"===t)a=c.setFollower.bind(c),l=o.po;else{if("delete"!==t)return;a=c.deleteFollower.bind(c),l=o.OI}s((0,o.NH)({userID:e,boolean:!0}));try{0===(await a(e)).resultCode&&(s(l({id:e})),s((0,o.NH)({userID:e,boolean:!1})))}catch(r){s((0,u.Gp)({error:r}))}},getPageNumber:o.rH,getSearchText:o.Kk}))((e=>{const{getUserThunkCreator:t,pageNumber:s,SearchText:l,getPageNumber:o,getSearchText:r,totalCount:n,countPage:c,isLoades:u,users:i,isFollowing:g,toggleFollowerStatus:d}=e,m=(0,y.g)();(0,a.useEffect)((()=>{const e=m.pageNumber;t(e||s,l)}),[]);let b=Math.ceil(n/c),h=[];for(let a=1;a<=b;a++)h.push(a);return(0,_.jsxs)("div",{children:[(0,_.jsx)(C,{NumberPage:b,PageNumber:h,PageNumberURL:s,postPageNumber:e=>{o({number:e}),t(e,l)}}),(0,_.jsx)(P,{PageNumber:s,updatePageNumber:e=>{o({number:e.target.value}),t(e.target.value,l)},SearchText:l,updateSearchText:e=>{r({text:e.target.value}),t(s,e.target.value)}}),u?(0,_.jsx)(v.A,{}):(0,_.jsx)(j,{users:i,isFollowing:g,toggleFollowerStatus:d})]})}))}}]);
//# sourceMappingURL=415.f3b09587.chunk.js.map